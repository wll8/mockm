# 待完成
## 功能
- [ ] feat: 支持 ws 示例
- [ ] feat: 当访问不存在的 test-api 时, 不应显示操作按钮, 并且提示记录不存在
- [ ] feat: 添加崩溃重启功能
- [ ] feat: 支持配置静态文件目录, 可配置多个
- [ ] feat: 优化mock生成规则
  - [ ] video|movie https://www.w3school.com.cn/i/movie.mp4
  - [ ] cover @image
  - [ ] author @cname
  - [ ] describe @cparagraph
  - [ ] limit$(ed) @natural
  - [ ] address @address - 注意此地址规则无效
- [x] feat: 向 config 暴露所有 util
- [ ] feat: 支持在 config.api 中按条件再回到 config.proxy
- [ ] feat: 支持 node v10.12.0 以下的版本, 需注意 fs.mkdirSync 的 recursive 选项, babel 只能转换 js 标准 api
- [x] feat: 从 cdn 下载 ngrok 程序
- [ ] feat: webApi 支持批处理, 自动翻译, 类型转换, 数据生成
- [ ] feat: 分离常用功能例如API文档创建器到浏览器插件, 例如 FeHelper https://github.com/zxlie/FeHelper
- [x] feat: 从 web 页面创建模拟接口及文档
- [x] feat: 在请求详情页面添加 `应用响应`, 快速应用到 apiWeb 的自定义返回值
- [x] refactor: 分离示例配置和默认配置
  - 目前的默认配置其实是函数很多解释参数作为的示例配置, 这样并不利于文档编写, 因为有些示例值并不适合用珩默认值.
- [ ] feat: 各平台一键安装命令
- [ ] feat: 显示完整的 swagger , 方便浏览其他 api
- [ ] feat: 标记数据是来自自定义 api 还是后台接口
- [ ] feat: 思考如何解决记录的请求与实际发送的请求的混乱问题, 例如
  - req.url 和 req.method 被修改, 应该如何记录
- [ ] feat: 应该记录原始请求, 例如 req.originalUrl , 因为 req.url 会在程序内被修改, 记录它会感觉很奇怪
- [ ] feat: 注入 Eruda 或 vConsole
- [ ] feat: 自定义日志输出 https://github.com/expressjs/morgan#using-a-custom-format-function
- [ ] feat: 支持 yaml 格式的 openApi, 例如 https://petstore.swagger.io/v2/swagger.yaml
- [ ] feat: 提供相关工具
  - 数据转换 参考
    - https://github.com/Jokero/mapper.js
    - https://github.com/bozzltron/node-json-transform
    - https://goessner.net/articles/JsonPath/
    - https://stackoverflow.com/questions/50081462/javascript-how-to-map-a-backend-entity-to-a-frontend-entity-and-the-opposite
    - https://github.com/JSONPath-Plus/JSONPath
- [ ] feat: config 中应该也把获取 db 的方法按 util 给出, 为了方便使用 db 自定义 api
- [ ] feat: config.route 应支持不同的动词转发
- [x] feat: config.api 的 key 需支持简写, 即可以不写 method, 不写时表示所有 method
- [ ] feat: 在当前接口中搜索请求信息
  - 搜索范围: req, res, 搜索 `c`
  - api 历史 1
    - req header: ab`c`cd
    - req header: abc`c`d
    - req body:  bc`c`d
    - res header:  bc`c`d
    - res body:  bc`c`d
- [ ] feat: 重放时默认以忽略 query 参数方式进行匹配, 则仅匹配 path
- [ ] feat: npm frp 一键安装支持逻辑
  - 运行 `frpc frpc.ini` 命令前, 判断 node_modules 是否存在 frpc, 是则运行
  - 否则到远程下载, 下载完成后再运行 frps
    - 解析 json 配置为 ini
  
## 缺陷
- [ ] fix: 在 linux 上不能检测到使用 nvm 的全局安装的 cnpm
- [ ] fix: 如果检查新版本出错时, 不应提示更新 `已发布新版本 undefined...`
- [x] fix: 从请求详情中点击编辑 webApi 时, 不应该携带 query 参数
- [x] fix: 应该把有道翻译放在最后面, 因为它的翻译结果不精简. 例如 `名称` 不应该被翻译为 `The name of the` , 而应该翻译为 `name`.
- [x] fix: weApi 接口删除后不应该需要刷新才能看到已删除
- [ ] fix: 中文 api 路径会有问题
- [x] fix: res.send(undefined) 时报错
- [ ] fix: 当 http body json 的内容较大, 例如 6M 时, 在页面上无法查看详情, 导致浏览器内存不足页崩溃
- [ ] fix: 发送文件时, header 中没有 x-test-api
- [x] fix: node v10.12.0 没有触发 req 的 close 事件, node v12.18.3 执行了. 导致某些情况没有保存请求记录到 json 文件中, 参考: 
  - https://github.com/nodejs/node/commit/f22c7c10ca0c8c7a10057de71bc423bf8b633b88
  - https://github.com/nodejs/node/issues/31394
  - https://github.com/nodejs/node/issues/21063
  - https://github.com/nodejs/node/pull/20611
  - https://nodejs.org/api/http.html
  - https://github.com/jshttp/on-finished
- [x] fix: 页面上创建的 webApi 接口包含点符号时, 无法使用, 因为点符号会被处理为键的层级
- [x] fix: 初始化项目, 第一次请求接口时, x-test-api 值为 `http://127.0.0.1:9005/#/history,/get/name`, id 丢失, 便记录列表中有显示.
- [ ] fix: 当没有配置文件时, 在 node14.2 中启动时出现警告 `Warning: Accessing non-existent property 'proxy' of module exports inside circular dependency`
  - 这可能是由于默许的 config.js 中 base64deCode.config 的值也是 config.js 造成的循环 require
- [ ] fix: 使用重放接口时, 也应该能使用 config.proxy 和 config.api
- [ ] fix: 当 config.api 中 `/all/method` 与 `get /all/method` 冲突时, 使用后者
- [ ] fix: 实际获取的与实际记录的不一致, 修改 res.body 之后, 记录的 body 还是修改前的
- [ ] fix: config.api 中修改 req.method 为 patch 之后, 不应该是全部修改
- [ ] fix: 请求 id 会有一定的概率重复, 复制的 id 可能会导致排序出错, 或需要 rowKey 的组件渲染出错
- [x] fix: 代理整个网站时, 网站中的一些链接无法正常工作
- [ ] fix(doc): 文档中的表格应该 100% 宽度度支持自适应
